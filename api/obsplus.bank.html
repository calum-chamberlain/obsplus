

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obsplus.bank package &#8212; ObsPlus 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">ObsPlus</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/obsplus_panda.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">obsplus.bank package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.core">obsplus.bank.core module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.eventbank">obsplus.bank.eventbank module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.mseed">obsplus.bank.mseed module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.stationbank">obsplus.bank.stationbank module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.utils">obsplus.bank.utils module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank.wavebank">obsplus.bank.wavebank module</a></li>
<li><a class="reference internal" href="#module-obsplus.bank">Module contents</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/obsplus.bank.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="obsplus-bank-package">
<h1>obsplus.bank package<a class="headerlink" href="#obsplus-bank-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-obsplus.bank.core">
<span id="obsplus-bank-core-module"></span><h2>obsplus.bank.core module<a class="headerlink" href="#module-obsplus.bank.core" title="Permalink to this headline">¶</a></h2>
<p>Bank ABC</p>
</div>
<div class="section" id="module-obsplus.bank.eventbank">
<span id="obsplus-bank-eventbank-module"></span><h2>obsplus.bank.eventbank module<a class="headerlink" href="#module-obsplus.bank.eventbank" title="Permalink to this headline">¶</a></h2>
<p>Class for interacting with events on a filesystem.</p>
<dl class="class">
<dt id="obsplus.bank.eventbank.EventBank">
<em class="property">class </em><code class="descclassname">obsplus.bank.eventbank.</code><code class="descname">EventBank</code><span class="sig-paren">(</span><em>base_path='.'</em>, <em>path_structure=None</em>, <em>name_structure=None</em>, <em>cache_size=5</em>, <em>format='quakeml'</em>, <em>ext='.xml'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/eventbank.html#EventBank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.eventbank.EventBank" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">obsplus.bank.core._Bank</span></code></p>
<p>A class to interact with a directory of event files.</p>
<p>Event bank reads through a directory structure of event files,
collects info from each one, then creates and index to allow the files
to be efficiently queried.</p>
<p>Implements a superset of the <a class="reference internal" href="obsplus.html#obsplus.interfaces.EventClient" title="obsplus.interfaces.EventClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventClient</span></code></a>
interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>base_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>, <a class="reference internal" href="#obsplus.bank.eventbank.EventBank" title="obsplus.bank.eventbank.EventBank"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventBank</span></code></a>]) – The path to the directory containing event files. If it does not
exist an empty directory will be created.</li>
<li><strong>path_structure</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – <p>Define the directory structure used by the event bank. Characters are
separated by /, regardless of operating system. The following
words can be used in curly braces as data specific variables:</p>
<blockquote>
<div>year, month, day, julday, hour, minute, second, event_id,
event_id_short</div></blockquote>
<p>If no structure is provided it will be read from the index, if no
index exists the default is {year}/{month}/{day}</p>
</li>
<li><strong>name_structure</strong> (<em>str</em>) – The same as path structure but for the file name. Supports the same
variables and a slash cannot be used in a file name on most operating
systems. The default extension (.xml) will be added.
The default is {time}_{event_id_short}.</li>
<li><strong>format</strong> – The anticipated format of the event files. Any format supported by the
obspy.read_events function is permitted.</li>
<li><strong>ext</strong> – The extension on the files. Can be used to avoid parsing non-event
files.</li>
<li><strong>cache_size</strong> (<em>int</em>) – The number of queries to store. Avoids having to read the index of
the database multiple times for queries involving the same start and
end times.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">index_path</span></code></dt>
<dd><p class="first last">The expected path to the index file.</p>
</dd>
<dt><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.last_updated" title="obsplus.bank.eventbank.EventBank.last_updated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_updated</span></code></a></dt>
<dd><p class="first last">Return the last modified time stored in the index, else 0.0</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">lock_file_path</span></code></dt>
<dd><p class="first last">The expected path for the lock file.</p>
</dd>
<dt><strong>name_structure</strong></dt>
<dd></dd>
<dt><strong>path_structure</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_on_index_lock</span></code>([wait_interval,&nbsp;max_retry])</td>
<td>Blocks until the lock is released.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_bank_path_exists</span></code>([create])</td>
<td>Ensure the bank_path exists else raise an BankDoesNotExistError.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.get_event_summary" title="obsplus.bank.eventbank.EventBank.get_event_summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_event_summary</span></code></a>(**kwargs)</td>
<td>Read the index and return a dataframe containing the event info.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.get_events" title="obsplus.bank.eventbank.EventBank.get_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code></a>(**kwargs)</td>
<td>Read events from bank.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_service_version</span></code>()</td>
<td>Return the version of obsplus used to create index.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">lock_index</span></code>()</td>
<td>Acquire lock for work inside context manager.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.put_events" title="obsplus.bank.eventbank.EventBank.put_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_events</span></code></a>(catalog[,&nbsp;update_index])</td>
<td>Put an event into the database.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.read_index" title="obsplus.bank.eventbank.EventBank.read_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_index</span></code></a>(**kwargs)</td>
<td>Read the index and return a dataframe containing the event info.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.eventbank.EventBank.update_index" title="obsplus.bank.eventbank.EventBank.update_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_index</span></code></a>([bar,&nbsp;min_files_for_bar])</td>
<td>Iterate files in bank and add any modified since last update to index.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="obsplus.bank.eventbank.EventBank.get_event_summary">
<code class="descname">get_event_summary</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.get_event_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the index and return a dataframe containing the event info.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>starttime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or after the specified start time.</li>
<li><strong>endtime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or before the specified end time.</li>
<li><strong>minlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude larger than the specified minimum.</li>
<li><strong>maxlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude smaller than the specified maximum.</li>
<li><strong>minlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude larger than the specified minimum.</li>
<li><strong>maxlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude smaller than the specified maximum.</li>
<li><strong>mindepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, larger than the specified
minimum.</li>
<li><strong>maxdepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, smaller than the specified
maximum.</li>
<li><strong>minmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude larger than the specified minimum.</li>
<li><strong>maxmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude smaller than the specified maximum.</li>
<li><strong>magnitudetype</strong> (<em>str</em><em>, </em><em>optional</em>) – Specify a magnitude type to use for testing the minimum and maximum
limits.</li>
<li><strong>eventid</strong> (<em>str</em><em> (or </em><em>sequence of such</em><em>)</em><em>, </em><em>optional</em>) – Select specific event(s) by ID.</li>
<li><strong>limit</strong> (<em>int</em><em>, </em><em>optional</em>) – Limit the results to the specified number of events.</li>
<li><strong>offset</strong> (<em>int</em><em>, </em><em>optional</em>) – Return results starting at the event count specified, starting at 1.</li>
<li><strong>contributor</strong> (<em>str</em><em>, </em><em>optional</em>) – Limit to events contributed by a specified contributor.</li>
<li><strong>updatedafter</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events updated after the specified time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.eventbank.EventBank.get_events">
<code class="descname">get_events</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/eventbank.html#EventBank.get_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.get_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Read events from bank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>starttime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or after the specified start time.</li>
<li><strong>endtime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or before the specified end time.</li>
<li><strong>minlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude larger than the specified minimum.</li>
<li><strong>maxlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude smaller than the specified maximum.</li>
<li><strong>minlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude larger than the specified minimum.</li>
<li><strong>maxlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude smaller than the specified maximum.</li>
<li><strong>mindepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, larger than the specified
minimum.</li>
<li><strong>maxdepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, smaller than the specified
maximum.</li>
<li><strong>minmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude larger than the specified minimum.</li>
<li><strong>maxmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude smaller than the specified maximum.</li>
<li><strong>magnitudetype</strong> (<em>str</em><em>, </em><em>optional</em>) – Specify a magnitude type to use for testing the minimum and maximum
limits.</li>
<li><strong>eventid</strong> (<em>str</em><em> (or </em><em>sequence of such</em><em>)</em><em>, </em><em>optional</em>) – Select specific event(s) by ID.</li>
<li><strong>limit</strong> (<em>int</em><em>, </em><em>optional</em>) – Limit the results to the specified number of events.</li>
<li><strong>offset</strong> (<em>int</em><em>, </em><em>optional</em>) – Return results starting at the event count specified, starting at 1.</li>
<li><strong>contributor</strong> (<em>str</em><em>, </em><em>optional</em>) – Limit to events contributed by a specified contributor.</li>
<li><strong>updatedafter</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events updated after the specified time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.eventbank.EventBank.index_name">
<code class="descname">index_name</code><em class="property"> = '.index.db'</em><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.index_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.eventbank.EventBank.last_updated">
<code class="descname">last_updated</code><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.last_updated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last modified time stored in the index, else 0.0</p>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.eventbank.EventBank.namespace">
<code class="descname">namespace</code><em class="property"> = '/events'</em><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.namespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="obsplus.bank.eventbank.EventBank.put_events">
<code class="descname">put_events</code><span class="sig-paren">(</span><em>catalog</em>, <em>update_index=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/eventbank.html#EventBank.put_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.put_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Put an event into the database.</p>
<p>If the event_id already exists the old event will be overwritten on
disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>catalog</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code>]) – A Catalog or Event object to put into the database.</li>
<li><strong>update_index</strong> – Flag to indicate whether or not to update the event index after
writing the new events. Default is True.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.eventbank.EventBank.read_index">
<code class="descname">read_index</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/eventbank.html#EventBank.read_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.read_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the index and return a dataframe containing the event info.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>starttime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or after the specified start time.</li>
<li><strong>endtime</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events on or before the specified end time.</li>
<li><strong>minlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude larger than the specified minimum.</li>
<li><strong>maxlatitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a latitude smaller than the specified maximum.</li>
<li><strong>minlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude larger than the specified minimum.</li>
<li><strong>maxlongitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a longitude smaller than the specified maximum.</li>
<li><strong>mindepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, larger than the specified
minimum.</li>
<li><strong>maxdepth</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with depth, in kilometers, smaller than the specified
maximum.</li>
<li><strong>minmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude larger than the specified minimum.</li>
<li><strong>maxmagnitude</strong> (<em>float</em><em>, </em><em>optional</em>) – Limit to events with a magnitude smaller than the specified maximum.</li>
<li><strong>magnitudetype</strong> (<em>str</em><em>, </em><em>optional</em>) – Specify a magnitude type to use for testing the minimum and maximum
limits.</li>
<li><strong>eventid</strong> (<em>str</em><em> (or </em><em>sequence of such</em><em>)</em><em>, </em><em>optional</em>) – Select specific event(s) by ID.</li>
<li><strong>limit</strong> (<em>int</em><em>, </em><em>optional</em>) – Limit the results to the specified number of events.</li>
<li><strong>offset</strong> (<em>int</em><em>, </em><em>optional</em>) – Return results starting at the event count specified, starting at 1.</li>
<li><strong>contributor</strong> (<em>str</em><em>, </em><em>optional</em>) – Limit to events contributed by a specified contributor.</li>
<li><strong>updatedafter</strong> (<em>obspy.UTCDateTime</em><em> or </em><em>valid input to such</em><em>, </em><em>optional</em>) – Limit to events updated after the specified time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.eventbank.EventBank.update_index">
<code class="descname">update_index</code><span class="sig-paren">(</span><em>bar=None</em>, <em>min_files_for_bar=100</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/eventbank.html#EventBank.update_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.eventbank.EventBank.update_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate files in bank and add any modified since last update to index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bar</strong> – An class that has an <cite>update</cite> and <cite>finish</cite> method, should behave
the same as the progressbar.ProgressBar class. This method provides
a way to override the default progress bar but is rarely needed.</li>
<li><strong>min_files_for_bar</strong> – Minimum number of un-indexed files required for displaying the
progress bar.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-obsplus.bank.mseed">
<span id="obsplus-bank-mseed-module"></span><h2>obsplus.bank.mseed module<a class="headerlink" href="#module-obsplus.bank.mseed" title="Permalink to this headline">¶</a></h2>
<p>Slimmed down functions for indexing miniseed files.</p>
<p>Contains hacked bits from obspy’s mseed module.</p>
<p>Copyrights to obspy developers still apply.</p>
<dl class="function">
<dt id="obsplus.bank.mseed.summarize_mseed">
<code class="descclassname">obsplus.bank.mseed.</code><code class="descname">summarize_mseed</code><span class="sig-paren">(</span><em>mseed_object</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/mseed.html#summarize_mseed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.mseed.summarize_mseed" title="Permalink to this definition">¶</a></dt>
<dd><p>get a summary of mseed file.</p>
<p>Returns a list of dicts with nslc and starttime/endtime.</p>
<p>Note: we cannot simply use obspy.io.mseed.get_record_information because it
returns info only about the first trace.</p>
</dd></dl>

</div>
<div class="section" id="module-obsplus.bank.stationbank">
<span id="obsplus-bank-stationbank-module"></span><h2>obsplus.bank.stationbank module<a class="headerlink" href="#module-obsplus.bank.stationbank" title="Permalink to this headline">¶</a></h2>
<p>Class for interacting with station information on a file system</p>
<dl class="class">
<dt id="obsplus.bank.stationbank.StationBank">
<em class="property">class </em><code class="descclassname">obsplus.bank.stationbank.</code><code class="descname">StationBank</code><a class="reference internal" href="../_modules/obsplus/bank/stationbank.html#StationBank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.stationbank.StationBank" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-obsplus.bank.utils">
<span id="obsplus-bank-utils-module"></span><h2>obsplus.bank.utils module<a class="headerlink" href="#module-obsplus.bank.utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for banks</p>
<dl class="function">
<dt id="obsplus.bank.utils.get_inventory">
<code class="descclassname">obsplus.bank.utils.</code><code class="descname">get_inventory</code><span class="sig-paren">(</span><em>inventory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/utils.html#get_inventory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.utils.get_inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an stations from stations parameter if path or stations else
return None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inventory</strong> (<em>str</em><em>, </em><em>obspy.Inventory</em><em>, or </em><em>None</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">obspy.Inventory or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obsplus.bank.utils.get_kernel_query">
<code class="descclassname">obsplus.bank.utils.</code><code class="descname">get_kernel_query</code><span class="sig-paren">(</span><em>starttime</em>, <em>endtime</em>, <em>buffer</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/utils.html#get_kernel_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.utils.get_kernel_query" title="Permalink to this definition">¶</a></dt>
<dd><p>” get the HDF5 kernel query parameters (this is necessary because
hdf5 doesnt accept invert conditions for some reason. A slight buffer
is applied to the ranges to make sure no edge files are left out</p>
</dd></dl>

<dl class="function">
<dt id="obsplus.bank.utils.sql_connection">
<code class="descclassname">obsplus.bank.utils.</code><code class="descname">sql_connection</code><span class="sig-paren">(</span><em>path</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/utils.html#sql_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.utils.sql_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-obsplus.bank.wavebank">
<span id="obsplus-bank-wavebank-module"></span><h2>obsplus.bank.wavebank module<a class="headerlink" href="#module-obsplus.bank.wavebank" title="Permalink to this headline">¶</a></h2>
<p>A local database for waveform formats.</p>
<dl class="class">
<dt id="obsplus.bank.wavebank.WaveBank">
<em class="property">class </em><code class="descclassname">obsplus.bank.wavebank.</code><code class="descname">WaveBank</code><span class="sig-paren">(</span><em>base_path='.'</em>, <em>path_structure=None</em>, <em>name_structure=None</em>, <em>cache_size=5</em>, <em>inventory=None</em>, <em>format='mseed'</em>, <em>ext=None</em>, <em>concurrent_updates=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">obsplus.bank.core._Bank</span></code></p>
<p>A class to interact with a directory of waveform files.</p>
<p><cite>WaveBank</cite> reads through a directory structure of waveforms files,
collects info from each one, then creates and index to allow the files
to be efficiently queried.</p>
<p>Implements a superset of the <a class="reference internal" href="obsplus.html#obsplus.interfaces.WaveformClient" title="obsplus.interfaces.WaveformClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">WaveformClient</span></code></a>
interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>base_path</strong> (<em>str</em>) – The path to the directory containing waveform files. If it does not
exist an empty directory will be created.</li>
<li><strong>path_structure</strong> (<em>str</em>) – <p>Define the directory structure of the wavebank that will be used to
put waveforms into the directory. Characters are separated by /,
regardless of operating system. The following words can be used in
curly braces as data specific variables:</p>
<blockquote>
<div>year, month, day, julday, hour, minute, second, network,
station, location, channel, time</div></blockquote>
<p>example : streams/{year}/{month}/{day}/{network}/{station}
If no structure is provided it will be read from the index, if no
index exists the default is {net}/{sta}/{chan}/{year}/{month}/{day}</p>
</li>
<li><strong>name_structure</strong> (<em>str</em>) – The same as path structure but for the file name. Supports the same
variables but requires a period as the separation character. The
default extension (.mseed) will be added. The default is {time}
example : {seedid}.{time}</li>
<li><strong>cache_size</strong> (<em>int</em>) – The number of queries to store. Avoids having to read the index of
the bank multiple times for queries involving the same start and end
times.</li>
<li><strong>inventory</strong> (<em>obspy.Inventory</em><em> or </em><em>str</em>) – obspy.Inventory or path to stationxml to load. Only used to attach
responses when requested.</li>
<li><strong>format</strong> (<em>str</em>) – The expected format for the waveform files. Any format supported by
obspy.read is permitted. The default is mseed. Other formats will be
tried after the default parser fails.</li>
<li><strong>ext</strong> (<em>str</em><em> or </em><em>None</em>) – The extension of the waveform files. If provided, only files with
this extension will be read.</li>
<li><strong>concurrent_updates</strong> – If True this bank will share an index with other processes, one or
more of which may perform update_index operations. When used a simple
file locking mechanism attempts to compensate for shortcomings in
HDF5 stores lack of concurrency support. This is not needed if all
processes are only going to read from the bank, nor is it bulletproof,
but it should help avoid some issues with a few concurrent processes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.hdf_kwargs" title="obsplus.bank.wavebank.WaveBank.hdf_kwargs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hdf_kwargs</span></code></a></dt>
<dd><p class="first last">A dict of hdf_kwargs to pass to PyTables</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">index_path</span></code></dt>
<dd><p class="first last">The expected path to the index file.</p>
</dd>
<dt><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.last_updated" title="obsplus.bank.wavebank.WaveBank.last_updated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_updated</span></code></a></dt>
<dd><p class="first last">Return the last modified time stored in the index, else None.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">lock_file_path</span></code></dt>
<dd><p class="first last">The expected path for the lock file.</p>
</dd>
<dt><strong>name_structure</strong></dt>
<dd></dd>
<dt><strong>path_structure</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_on_index_lock</span></code>([wait_interval,&nbsp;max_retry])</td>
<td>Blocks until the lock is released.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_bank_path_exists</span></code>([create])</td>
<td>Ensure the bank_path exists else raise an BankDoesNotExistError.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_availability_df" title="obsplus.bank.wavebank.WaveBank.get_availability_df"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_availability_df</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Return a dataframe specifying the availability of the archive.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_gaps_df" title="obsplus.bank.wavebank.WaveBank.get_gaps_df"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_gaps_df</span></code></a>(*args[,&nbsp;min_gap])</td>
<td>Return a dataframe containing an entry for every gap in the archive.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_service_version" title="obsplus.bank.wavebank.WaveBank.get_service_version"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_service_version</span></code></a>()</td>
<td>Return the version of obsplus</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_uptime_df" title="obsplus.bank.wavebank.WaveBank.get_uptime_df"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_uptime_df</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Return a dataframe with uptime stats for selected channels.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_waveforms" title="obsplus.bank.wavebank.WaveBank.get_waveforms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_waveforms</span></code></a>([network,&nbsp;station,&nbsp;location,&nbsp;…])</td>
<td>Get waveforms from the bank.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_waveforms_bulk" title="obsplus.bank.wavebank.WaveBank.get_waveforms_bulk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_waveforms_bulk</span></code></a>(bulk[,&nbsp;index])</td>
<td>Get a large number of waveforms with a bulk request.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.get_waveforms_by_seed" title="obsplus.bank.wavebank.WaveBank.get_waveforms_by_seed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_waveforms_by_seed</span></code></a>(seed_id,&nbsp;starttime,&nbsp;…)</td>
<td>Get waveforms based on a single seed_id or a list of seed_ids.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">lock_index</span></code>()</td>
<td>Acquire lock for work inside context manager.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.put_waveforms" title="obsplus.bank.wavebank.WaveBank.put_waveforms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_waveforms</span></code></a>(stream[,&nbsp;name,&nbsp;update_index])</td>
<td>Add the waveforms in a waveforms to the bank.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.read_index" title="obsplus.bank.wavebank.WaveBank.read_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_index</span></code></a>([network,&nbsp;station,&nbsp;location,&nbsp;…])</td>
<td>Return a dataframe of the index, optionally applying filters.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.update_index" title="obsplus.bank.wavebank.WaveBank.update_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_index</span></code></a>([bar,&nbsp;min_files_for_bar])</td>
<td>Iterate files in bank and add any modified since last update to index.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obsplus.bank.wavebank.WaveBank.yield_waveforms" title="obsplus.bank.wavebank.WaveBank.yield_waveforms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">yield_waveforms</span></code></a>([network,&nbsp;station,&nbsp;…])</td>
<td>Yield waveforms from the bank.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="38%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>availability</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.availability">
<code class="descname">availability</code><span class="sig-paren">(</span><em>network=None</em>, <em>station=None</em>, <em>location=None</em>, <em>channel=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.availability"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.availability" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>]]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.buffer">
<code class="descname">buffer</code><em class="property"> = 10.111</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.buffer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.columns_no_path">
<code class="descname">columns_no_path</code><em class="property"> = ('network', 'station', 'location', 'channel', 'starttime', 'endtime')</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.columns_no_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.gap_columns">
<code class="descname">gap_columns</code><em class="property"> = ('network', 'station', 'location', 'channel', 'starttime', 'endtime', 'gap_duration')</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.gap_columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_availability_df">
<code class="descname">get_availability_df</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_availability_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_availability_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe specifying the availability of the archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_gaps_df">
<code class="descname">get_gaps_df</code><span class="sig-paren">(</span><em>*args</em>, <em>min_gap=1.0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_gaps_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_gaps_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe containing an entry for every gap in the archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
<li><strong>min_gap</strong> – The minimum gap to report. Should at least be greater than
the sample rate in order to avoid counting one sample between
files as gaps. If files have some overlaps this parameter can
be set to 0.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_service_version">
<code class="descname">get_service_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_service_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_service_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the version of obsplus</p>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_uptime_df">
<code class="descname">get_uptime_df</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_uptime_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_uptime_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe with uptime stats for selected channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_waveforms">
<code class="descname">get_waveforms</code><span class="sig-paren">(</span><em>network=None</em>, <em>station=None</em>, <em>location=None</em>, <em>channel=None</em>, <em>starttime=None</em>, <em>endtime=None</em>, <em>attach_response=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Get waveforms from the bank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
<li><strong>attach_response</strong> (<em>bool</em>) – If True attach the response to the waveforms using the stations</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>All string parameters can use posix style matching with * and ? chars.
All datapoints between selected starttime and endtime will be returned.
Consequently there may be gaps in the returned stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_waveforms_bulk">
<code class="descname">get_waveforms_bulk</code><span class="sig-paren">(</span><em>bulk</em>, <em>index=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_waveforms_bulk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_waveforms_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a large number of waveforms with a bulk request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bulk</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of any number of lists containing the following:
(network, station, location, channel, starttime, endtime).</li>
<li><strong>index</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]) – A dataframe returned by read_index. Enables calling code to only
read the index from disk once for repetitive calls.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.get_waveforms_by_seed">
<code class="descname">get_waveforms_by_seed</code><span class="sig-paren">(</span><em>seed_id</em>, <em>starttime</em>, <em>endtime</em>, <em>attach_response=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.get_waveforms_by_seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.get_waveforms_by_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Get waveforms based on a single seed_id or a list of seed_ids.</p>
<p>Seed ids have the following form: network.station.location.channel,
it does not yet support usage of wildcards.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>seed_id</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A single seed id or sequence of ids</li>
<li><strong>starttime</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>) – The beginning of time to pull</li>
<li><strong>endtime</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>) – The end of the time to pull</li>
<li><strong>attach_response</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, and if a an stations is attached to the bank, attach
the response to the waveforms before returning.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.hdf_kwargs">
<code class="descname">hdf_kwargs</code><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.hdf_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of hdf_kwargs to pass to PyTables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.index_columns">
<code class="descname">index_columns</code><em class="property"> = ('network', 'station', 'location', 'channel', 'starttime', 'endtime', 'path')</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.index_columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.index_float">
<code class="descname">index_float</code><em class="property"> = ('starttime', 'endtime')</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.index_float" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.index_str">
<code class="descname">index_str</code><em class="property"> = ('network', 'station', 'location', 'channel')</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.index_str" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.last_updated">
<code class="descname">last_updated</code><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.last_updated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last modified time stored in the index, else None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.metadata_columns">
<code class="descname">metadata_columns</code><em class="property"> = ['last_updated', 'path_structure', 'name_structure']</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.metadata_columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.min_itemsize">
<code class="descname">min_itemsize</code><em class="property"> = {'channel': 8, 'location': 8, 'network': 8, 'path': 79, 'station': 8}</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.min_itemsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="obsplus.bank.wavebank.WaveBank.namespace">
<code class="descname">namespace</code><em class="property"> = '/waveforms'</em><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.namespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.put_waveforms">
<code class="descname">put_waveforms</code><span class="sig-paren">(</span><em>stream</em>, <em>name=None</em>, <em>update_index=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.put_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.put_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the waveforms in a waveforms to the bank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stream</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>) – An obspy waveforms object to add to the bank</li>
<li><strong>name</strong> – Name of file, if None it will be determined based on contents</li>
<li><strong>update_index</strong> – Flag to indicate whether or not to update the waveform index
after writing the new events. Default is True.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.read_index">
<code class="descname">read_index</code><span class="sig-paren">(</span><em>network=None</em>, <em>station=None</em>, <em>location=None</em>, <em>channel=None</em>, <em>starttime=None</em>, <em>endtime=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.read_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.read_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe of the index, optionally applying filters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
<li><strong>kwargs</strong> – kwargs are passed to pandas.read_hdf function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.update_index">
<code class="descname">update_index</code><span class="sig-paren">(</span><em>bar=None</em>, <em>min_files_for_bar=5000</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.update_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.update_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate files in bank and add any modified since last update to index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bar</strong> – An class that has an <cite>update</cite> and <cite>finish</cite> method, should behave
the same as the progressbar.ProgressBar class. This method provides
a way to override the default progress bar and is used only for
hooking this class into larger (graphical) systems.</li>
<li><strong>min_files_for_bar</strong> – Minimum number of un-indexed files required for using the
progress bar.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsplus.bank.wavebank.WaveBank.yield_waveforms">
<code class="descname">yield_waveforms</code><span class="sig-paren">(</span><em>network=None</em>, <em>station=None</em>, <em>location=None</em>, <em>channel=None</em>, <em>starttime=None</em>, <em>endtime=None</em>, <em>attach_response=False</em>, <em>duration=3600.0</em>, <em>overlap=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/obsplus/bank/wavebank.html#WaveBank.yield_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#obsplus.bank.wavebank.WaveBank.yield_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield waveforms from the bank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>network</strong> (<em>str</em>) – The network code</li>
<li><strong>station</strong> (<em>str</em>) – The station code</li>
<li><strong>location</strong> (<em>str</em>) – The location code</li>
<li><strong>channel</strong> (<em>str</em>) – The channel code</li>
<li><strong>starttime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired starttime of the waveforms</li>
<li><strong>endtime</strong> (<em>float</em><em> or </em><em>obspy.UTCDateTime</em>) – The desired endtime of the waveforms</li>
<li><strong>attach_response</strong> (<em>bool</em>) – If True attach the response to the waveforms using the stations</li>
<li><strong>duration</strong> (<em>float</em>) – The duration of the streams to yield. All channels selected
channels will be included in the waveforms.</li>
<li><strong>overlap</strong> (<em>float</em>) – If duration is used, the amount of overlap in yielded streams,
added to the end of the waveforms.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>All string parameters can use posix style matching with * and ? chars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-obsplus.bank">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-obsplus.bank" title="Permalink to this headline">¶</a></h2>
<p>Module for interacting with bank structures</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">ObsPlus</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Derrick Chambers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>