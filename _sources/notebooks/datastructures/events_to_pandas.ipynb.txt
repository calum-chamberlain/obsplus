{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Events to DataFrame\n",
    "ObsPlus provides a way to extract useful summary information from ObsPy objects in order to create dataframes. This transformation is lossy but very useful when the full complexity of the `Catalog` object isn't warranted. By default the `events_to_df` function collects information the authors of ObsPlus have found useful, but it is fully extensible/customizable using the functionality of the [DataFrameExtractor](../utils/dataframeextractor.ipynb)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To demonstrate how the `Catalog` can be flattened into a tables, Let's again use the Crandall catalog."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/home/isti_ew/anaconda3/lib/python3.7/site-packages/dask/config.py:168: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n",
      "  data = yaml.load(f.read()) or {}\n",
      "/home/isti_ew/anaconda3/lib/python3.7/site-packages/distributed/config.py:20: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n",
      "  defaults = yaml.load(f)\n"
     ]
    }
   ],
   "source": [
    "import obspy\n",
    "import numpy as np\n",
    "from matplotlib import pyplot as plt\n",
    "from obspy.clients.fdsn import Client\n",
    "\n",
    "import obsplus"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>time</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>depth</th>\n",
       "      <th>magnitude</th>\n",
       "      <th>event_description</th>\n",
       "      <th>associated_phase_count</th>\n",
       "      <th>azimuthal_gap</th>\n",
       "      <th>event_id</th>\n",
       "      <th>horizontal_uncertainty</th>\n",
       "      <th>...</th>\n",
       "      <th>standard_error</th>\n",
       "      <th>used_phase_count</th>\n",
       "      <th>stations</th>\n",
       "      <th>station_count</th>\n",
       "      <th>vertical_uncertainty</th>\n",
       "      <th>updated</th>\n",
       "      <th>author</th>\n",
       "      <th>agency_id</th>\n",
       "      <th>creation_time</th>\n",
       "      <th>version</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1.186453e+09</td>\n",
       "      <td>39.4632</td>\n",
       "      <td>-111.2230</td>\n",
       "      <td>4180.0</td>\n",
       "      <td>1.26</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248883</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.8834</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "      <td>14</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:10:26.864045Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1.186523e+09</td>\n",
       "      <td>39.4627</td>\n",
       "      <td>-111.2200</td>\n",
       "      <td>4620.0</td>\n",
       "      <td>1.65</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248925</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5704</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M15A, O15A, P14A, P15A, P16A, P17A, P18A, Q14A...</td>\n",
       "      <td>19</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539296e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-11T22:08:54.236916Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>1.186458e+09</td>\n",
       "      <td>39.4625</td>\n",
       "      <td>-111.2152</td>\n",
       "      <td>4160.0</td>\n",
       "      <td>1.45</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248887</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5716</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "      <td>15</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:10:27.576204Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1.186452e+09</td>\n",
       "      <td>39.4648</td>\n",
       "      <td>-111.2255</td>\n",
       "      <td>1790.0</td>\n",
       "      <td>2.08</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248882</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9935</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...</td>\n",
       "      <td>35</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:15:19.190404Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>1.186471e+09</td>\n",
       "      <td>39.4605</td>\n",
       "      <td>-111.2242</td>\n",
       "      <td>3240.0</td>\n",
       "      <td>2.24</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248891</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9901</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...</td>\n",
       "      <td>35</td>\n",
       "      <td>None</td>\n",
       "      <td>1.334226e+09</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "           time  latitude  longitude   depth  magnitude event_description  \\\n",
       "0  1.186453e+09   39.4632  -111.2230  4180.0       1.26              None   \n",
       "1  1.186523e+09   39.4627  -111.2200  4620.0       1.65              None   \n",
       "2  1.186458e+09   39.4625  -111.2152  4160.0       1.45              None   \n",
       "3  1.186452e+09   39.4648  -111.2255  1790.0       2.08              None   \n",
       "4  1.186471e+09   39.4605  -111.2242  3240.0       2.24              None   \n",
       "\n",
       "   associated_phase_count  azimuthal_gap          event_id  \\\n",
       "0                     NaN            NaN  smi:local/248883   \n",
       "1                     NaN            NaN  smi:local/248925   \n",
       "2                     NaN            NaN  smi:local/248887   \n",
       "3                     NaN            NaN  smi:local/248882   \n",
       "4                     NaN            NaN  smi:local/248891   \n",
       "\n",
       "   horizontal_uncertainty  ...  standard_error  used_phase_count  \\\n",
       "0                     NaN  ...          0.8834               NaN   \n",
       "1                     NaN  ...          0.5704               NaN   \n",
       "2                     NaN  ...          0.5716               NaN   \n",
       "3                     NaN  ...          0.9935               NaN   \n",
       "4                     NaN  ...          0.9901               NaN   \n",
       "\n",
       "                                            stations station_count  \\\n",
       "0  DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...            14   \n",
       "1  M15A, O15A, P14A, P15A, P16A, P17A, P18A, Q14A...            19   \n",
       "2  DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...            15   \n",
       "3  DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...            35   \n",
       "4  DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...            35   \n",
       "\n",
       "   vertical_uncertainty       updated  author  agency_id  \\\n",
       "0                  None  1.539206e+09      DC      NIOSH   \n",
       "1                  None  1.539296e+09      DC      NIOSH   \n",
       "2                  None  1.539206e+09      DC      NIOSH   \n",
       "3                  None  1.539206e+09      DC      NIOSH   \n",
       "4                  None  1.334226e+09    None       None   \n",
       "\n",
       "                 creation_time  version  \n",
       "0  2018-10-10T21:10:26.864045Z     None  \n",
       "1  2018-10-11T22:08:54.236916Z     None  \n",
       "2  2018-10-10T21:10:27.576204Z     None  \n",
       "3  2018-10-10T21:15:19.190404Z     None  \n",
       "4                         None     None  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "crandall = obsplus.load_dataset('crandall')\n",
    "cat = crandall.event_client.get_events()\n",
    "ev_df = obsplus.events_to_df(cat)\n",
    "\n",
    "ev_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "`events_to_df` can also operate on other `event_client`s, like the `EventBank`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>time</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>depth</th>\n",
       "      <th>magnitude</th>\n",
       "      <th>event_description</th>\n",
       "      <th>associated_phase_count</th>\n",
       "      <th>azimuthal_gap</th>\n",
       "      <th>event_id</th>\n",
       "      <th>horizontal_uncertainty</th>\n",
       "      <th>...</th>\n",
       "      <th>standard_error</th>\n",
       "      <th>used_phase_count</th>\n",
       "      <th>stations</th>\n",
       "      <th>station_count</th>\n",
       "      <th>vertical_uncertainty</th>\n",
       "      <th>updated</th>\n",
       "      <th>author</th>\n",
       "      <th>agency_id</th>\n",
       "      <th>creation_time</th>\n",
       "      <th>version</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1.186453e+09</td>\n",
       "      <td>39.4632</td>\n",
       "      <td>-111.2230</td>\n",
       "      <td>4180.0</td>\n",
       "      <td>1.26</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248883</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.8834</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "      <td>14</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:10:26.864045Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1.186523e+09</td>\n",
       "      <td>39.4627</td>\n",
       "      <td>-111.2200</td>\n",
       "      <td>4620.0</td>\n",
       "      <td>1.65</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248925</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5704</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M15A, O15A, P14A, P15A, P16A, P17A, P18A, Q14A...</td>\n",
       "      <td>19</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539296e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-11T22:08:54.236916Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>1.186458e+09</td>\n",
       "      <td>39.4625</td>\n",
       "      <td>-111.2152</td>\n",
       "      <td>4160.0</td>\n",
       "      <td>1.45</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248887</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5716</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "      <td>15</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:10:27.576204Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1.186452e+09</td>\n",
       "      <td>39.4648</td>\n",
       "      <td>-111.2255</td>\n",
       "      <td>1790.0</td>\n",
       "      <td>2.08</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248882</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9935</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...</td>\n",
       "      <td>35</td>\n",
       "      <td>None</td>\n",
       "      <td>1.539206e+09</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10T21:15:19.190404Z</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>1.186471e+09</td>\n",
       "      <td>39.4605</td>\n",
       "      <td>-111.2242</td>\n",
       "      <td>3240.0</td>\n",
       "      <td>2.24</td>\n",
       "      <td>None</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248891</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9901</td>\n",
       "      <td>NaN</td>\n",
       "      <td>DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...</td>\n",
       "      <td>35</td>\n",
       "      <td>None</td>\n",
       "      <td>1.334226e+09</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "           time  latitude  longitude   depth  magnitude event_description  \\\n",
       "0  1.186453e+09   39.4632  -111.2230  4180.0       1.26              None   \n",
       "1  1.186523e+09   39.4627  -111.2200  4620.0       1.65              None   \n",
       "2  1.186458e+09   39.4625  -111.2152  4160.0       1.45              None   \n",
       "3  1.186452e+09   39.4648  -111.2255  1790.0       2.08              None   \n",
       "4  1.186471e+09   39.4605  -111.2242  3240.0       2.24              None   \n",
       "\n",
       "   associated_phase_count  azimuthal_gap          event_id  \\\n",
       "0                     NaN            NaN  smi:local/248883   \n",
       "1                     NaN            NaN  smi:local/248925   \n",
       "2                     NaN            NaN  smi:local/248887   \n",
       "3                     NaN            NaN  smi:local/248882   \n",
       "4                     NaN            NaN  smi:local/248891   \n",
       "\n",
       "   horizontal_uncertainty  ...  standard_error  used_phase_count  \\\n",
       "0                     NaN  ...          0.8834               NaN   \n",
       "1                     NaN  ...          0.5704               NaN   \n",
       "2                     NaN  ...          0.5716               NaN   \n",
       "3                     NaN  ...          0.9935               NaN   \n",
       "4                     NaN  ...          0.9901               NaN   \n",
       "\n",
       "                                            stations station_count  \\\n",
       "0  DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...            14   \n",
       "1  M15A, O15A, P14A, P15A, P16A, P17A, P18A, Q14A...            19   \n",
       "2  DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...            15   \n",
       "3  DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...            35   \n",
       "4  DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...            35   \n",
       "\n",
       "   vertical_uncertainty       updated  author  agency_id  \\\n",
       "0                  None  1.539206e+09      DC      NIOSH   \n",
       "1                  None  1.539296e+09      DC      NIOSH   \n",
       "2                  None  1.539206e+09      DC      NIOSH   \n",
       "3                  None  1.539206e+09      DC      NIOSH   \n",
       "4                  None  1.334226e+09    None       None   \n",
       "\n",
       "                 creation_time  version  \n",
       "0  2018-10-10T21:10:26.864045Z     None  \n",
       "1  2018-10-11T22:08:54.236916Z     None  \n",
       "2  2018-10-10T21:10:27.576204Z     None  \n",
       "3  2018-10-10T21:15:19.190404Z     None  \n",
       "4                         None     None  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "bank = crandall.event_client\n",
    "ev_df2 = obsplus.events_to_df(bank)\n",
    "ev_df2.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now we have access to all the wonderful Pandas magics. Here are a few contrived examples of things we may want to do:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAXkAAAD8CAYAAACSCdTiAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDMuMC4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvnQurowAAEYtJREFUeJzt3W+MXXWdx/H317Zqw2hJrBlJqQ6JPHHp+qeTyoYnd9DNFiTwYDFbw6I1mmaNrOymxlQfYDQx6gN0dTGSuhDANQxG3E2lNYZVR+QBaIetDKW66Ro2DBBQ0OJoxcz63Qdz6g6XO3PPvXNv7+HX9yu56T33/H73fr/zm3zmzJl7TyMzkSSV6SWjLkCSNDyGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalg60f1wps3b86JiYlRvfyqfvvb33LWWWeNuow1sYdmsIdmKKmH2dnZX2bmq+vOG1nIT0xMcPjw4VG9/KpmZmZotVqjLmNN7KEZ7KEZSuohIv6nl3merpGkghnyklQwQ16SCmbIS1LBDHlJKljXkI+Il0fEjyLiJxFxNCI+0WHMyyLijog4HhH3R8TEMIqVJPWmzpH8c8DFmflG4E3Azoi4sG3M+4BfZebrgc8Dnx1smZKkfnQN+VyyUG1uqG7t/2fgFcCt1f1vAG+LiBhYlZKkvtQ6Jx8R6yLiCPAUcHdm3t82ZAvwKEBmLgIngFcNslBJUu+il//IOyLOBv4N+PvMfGjZ40eBv8rM+Wr7v4Edmfl02/w9wB6A8fHx7dPT030VPffYib7m1TW+EZ482Xnfti2bhvrag7KwsMDY2Nioy1gTe2gGe2iGUz1MTU3NZuZk3Xk9XdYgM38dETPATuChZbvmga3AfESsBzYBz3SYvx/YDzA5OZn9fsx4976Dfc2ra++2Ra6f6/yleeSq1lBfe1BK+hj3i5k9NMOZ3EOdd9e8ujqCJyI2Am8Hfto27ADwnur+lcD3spdfESRJQ1HnSP4c4NaIWMfSD4WvZ+ZdEfFJ4HBmHgBuAr4aEcdZOoLfNbSKJUm1dQ35zHwQeHOHx69bdv/3wDsHW5okaa38xKskFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBDHlJKpghL0kFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalghrwkFcyQl6SCdQ35iNgaEd+PiGMRcTQiru0wphURJyLiSHW7bjjlSpJ6sb7GmEVgb2Y+EBGvAGYj4u7MfLht3A8z87LBlyhJ6lfXI/nMfCIzH6ju/wY4BmwZdmGSpLWLzKw/OGICuAe4IDOfXfZ4C7gTmAceBz6cmUc7zN8D7AEYHx/fPj093VfRc4+d6GteXeMb4cmTnfdt27JpqK89KAsLC4yNjY26jDWxh2awh2Y41cPU1NRsZk7WnVc75CNiDPgB8KnM/GbbvlcCf8zMhYi4FPhCZp6/2vNNTk7m4cOH69b5PBP7DvY1r6692xa5fq7zmaxHPvOOob72oMzMzNBqtUZdxprYQzPYQzOc6iEiegr5Wu+uiYgNLB2pf6094AEy89nMXKjuHwI2RMTmukVIkoajzrtrArgJOJaZn1thzGuqcUTEjup5nx5koZKk3tV5d81FwNXAXEQcqR77GPBagMy8EbgS+EBELAIngV3Zy8l+SdJQdA35zLwXiC5jbgBuGFRRkqTB8BOvklQwQ16SCmbIS1LBDHlJKpghL0kFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalghrwkFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklSwriEfEVsj4vsRcSwijkbEtR3GRER8MSKOR8SDEfGW4ZQrSerF+hpjFoG9mflARLwCmI2IuzPz4WVjLgHOr25vBb5c/StJGqGuR/KZ+URmPlDd/w1wDNjSNuwK4LZcch9wdkScM/BqJUk96emcfERMAG8G7m/btQV4dNn2PC/8QSBJOs0iM+sNjBgDfgB8KjO/2bbvIPDpzLy32v4u8JHMnG0btwfYAzA+Pr59enq6r6LnHjvR17y6xjfCkyeH+hI927ZlU0/jFxYWGBsbG1I1p4c9NIM9NMOpHqampmYzc7LuvDrn5ImIDcCdwNfaA74yD2xdtn0u8Hj7oMzcD+wHmJyczFarVbfO59m972Bf8+rau22R6+dqfWlOm0euavU0fmZmhn6/vk1hD81gD83Qbw913l0TwE3Ascz83ArDDgDvrt5lcyFwIjOf6LkaSdJA1TlcvQi4GpiLiCPVYx8DXguQmTcCh4BLgePA74D3Dr5USVKvuoZ8dZ49uoxJ4IODKkqSNBh+4lWSCmbIS1LBDHlJKpghL0kFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalghrwkFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBuoZ8RNwcEU9FxEMr7G9FxImIOFLdrht8mZKkfqyvMeYW4AbgtlXG/DAzLxtIRZKkgel6JJ+Z9wDPnIZaJEkDFpnZfVDEBHBXZl7QYV8LuBOYBx4HPpyZR1d4nj3AHoDx8fHt09PTfRU999iJvubVNb4Rnjw51Jfo2bYtm3oav7CwwNjY2JCqOT3soRnsoRlO9TA1NTWbmZN15w0i5F8J/DEzFyLiUuALmXl+t+ecnJzMw4cP163zeSb2HexrXl17ty1y/VydM1mnzyOfeUdP42dmZmi1WsMp5jSxh2awh2Y41UNE9BTya353TWY+m5kL1f1DwIaI2LzW55Ukrd2aQz4iXhMRUd3fUT3n02t9XknS2nU9JxERtwMtYHNEzAMfBzYAZOaNwJXAByJiETgJ7Mo654AkSUPXNeQz811d9t/A0lssJUkN4ydeJalghrwkFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBDHlJKpghL0kFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalgXUM+Im6OiKci4qEV9kdEfDEijkfEgxHxlsGXKUnqR50j+VuAnavsvwQ4v7rtAb689rIkSYPQNeQz8x7gmVWGXAHclkvuA86OiHMGVaAkqX+DOCe/BXh02fZ89ZgkacQiM7sPipgA7srMCzrsOwh8OjPvrba/C3wkM2c7jN3D0ikdxsfHt09PT/dV9NxjJ/qaV9f4Rnjy5FBfYuhK6OG8TesYGxsbdRlrsrCwYA8N0KmHYefIarZt2dTznFM9TE1NzWbmZN1563t+pReaB7Yu2z4XeLzTwMzcD+wHmJyczFar1dcL7t53sK95de3dtsj1c4P40oxOCT3csvMs+v0eaYqZmRl7aIBOPQw7R1bzyFWtnuf0uw6DOF1zAHh39S6bC4ETmfnEAJ5XkrRGXQ/1IuJ2oAVsjoh54OPABoDMvBE4BFwKHAd+B7x3WMVKknrTNeQz811d9ifwwYFVJEkaGD/xKkkFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSqYIS9JBTPkJalghrwkFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBDHlJKpghL0kFM+QlqWC1Qj4idkbEzyLieETs67B/d0T8IiKOVLf3D75USVKv1ncbEBHrgC8BfwnMAz+OiAOZ+XDb0Dsy85oh1ChJ6lOdI/kdwPHM/Hlm/gGYBq4YblmSpEGIzFx9QMSVwM7MfH+1fTXw1uVH7RGxG/g08Avgv4B/zMxHOzzXHmAPwPj4+Pbp6em+ip577ERf8+oa3whPnhzqSwxdCT2ct2kdY2Njoy5jTRYWFuyhATr1MOwcWc22LZt6nnOqh6mpqdnMnKw7r+vpGiA6PNb+k+FbwO2Z+VxE/B1wK3DxCyZl7gf2A0xOTmar1apb5/Ps3newr3l17d22yPVzdb40zVVCD7fsPIt+v0eaYmZmxh4aoFMPw86R1TxyVavnOf2uQ53TNfPA1mXb5wKPLx+QmU9n5nPV5leA7T1XIkkauDoh/2Pg/Ig4LyJeCuwCDiwfEBHnLNu8HDg2uBIlSf3q+vt8Zi5GxDXAd4B1wM2ZeTQiPgkczswDwIci4nJgEXgG2D3EmiVJNdU6aZuZh4BDbY9dt+z+R4GPDrY0SdJa+YlXSSqYIS9JBTPkJalghrwkFcyQl6SCGfKSVDBDXpIKZshLUsEMeUkqmCEvSQUz5CWpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBDHlJKpghL0kFM+QlqWCGvCQVzJCXpIIZ8pJUMENekgpmyEtSwQx5SSpYrZCPiJ0R8bOIOB4R+zrsf1lE3FHtvz8iJgZdqCSpd11DPiLWAV8CLgHeALwrIt7QNux9wK8y8/XA54HPDrpQSVLv6hzJ7wCOZ+bPM/MPwDRwRduYK4Bbq/vfAN4WETG4MiVJ/agT8luAR5dtz1ePdRyTmYvACeBVgyhQktS/9TXGdDoizz7GEBF7gD3V5kJE/KzG6592H4LNwC9HXcdalNDD1Gdf/D1QwDpgDwMX/Z3QPtXD63qZVCfk54Gty7bPBR5fYcx8RKwHNgHPtD9RZu4H9vdS4ChExOHMnBx1HWthD81gD81wJvdQ53TNj4HzI+K8iHgpsAs40DbmAPCe6v6VwPcy8wVH8pKk06vrkXxmLkbENcB3gHXAzZl5NCI+CRzOzAPATcBXI+I4S0fwu4ZZtCSpnjqna8jMQ8ChtseuW3b/98A7B1vaSDX+lFIN9tAM9tAMZ2wP4VkVSSqXlzWQpIKdsSEfETdHxFMR8dAK+1sRcSIijlS36zqNG6WI2BoR34+IYxFxNCKu7TAmIuKL1SUnHoyIt4yi1pXU7KHRaxERL4+IH0XET6oePtFhTGMv/VGz/t0R8Ytla/D+UdTaTUSsi4j/jIi7Ouxr7Bos16WHnteh1jn5Qt0C3ADctsqYH2bmZaennL4sAnsz84GIeAUwGxF3Z+bDy8ZcApxf3d4KfLn6tynq9ADNXovngIszcyEiNgD3RsS3M/O+ZWP+dOmPiNjF0qU//mYUxXZQp36AOzLzmhHU14trgWPAKzvsa/IaLLdaD9DjOpyxR/KZeQ8d3sv/YpKZT2TmA9X937D0jdH+aeQrgNtyyX3A2RFxzmkudUU1e2i06mu7UG1uqG7tf+xq7KU/atbfeBFxLvAO4F9WGNLYNTilRg89O2NDvqa/qH6F/XZE/Nmoi1lN9avnm4H723bVuSxFI6zSAzR8LapfsY8ATwF3Z+aK69DES3/UqB/gr6tTft+IiK0d9o/aPwEfAf64wv5Gr0GlWw/Q4zoY8it7AHhdZr4R+Gfg30dcz4oiYgy4E/iHzHy2fXeHKY07SuvSQ+PXIjP/NzPfxNInwndExAVtQxq9DjXq/xYwkZl/DvwH/39E3AgRcRnwVGbOrjasw2ONWYOaPfS8Dob8CjLz2VO/wlafE9gQEZtHXNYLVOdQ7wS+lpnf7DCkzmUpRqpbDy+WtQDIzF8DM8DOtl1/WofVLv0xaivVn5lPZ+Zz1eZXgO2nubRuLgIuj4hHWLpS7sUR8a9tY5q+Bl176GcdDPkVRMRrTp2vi4gdLH2tnh5tVc9X1XcTcCwzP7fCsAPAu6t32VwInMjMJ05bkV3U6aHpaxERr46Is6v7G4G3Az9tG9bYS3/Uqb/t7ziXs/S3k8bIzI9m5rmZOcHSJ+6/l5l/2zassWsA9XroZx3O2HfXRMTtQAvYHBHzwMdZ+oMTmXkjS98EH4iIReAksKtJ3xCVi4CrgbnqfCrAx4DXwp/6OARcChwHfge8dwR1rqZOD01fi3OAW2PpP9h5CfD1zLwrXjyX/qhT/4ci4nKW3g31DLB7ZNX24EW0Bita6zr4iVdJKpinaySpYIa8JBXMkJekghnyklQwQ16SCmbIS1LBDHlJKpghL0kF+z/+uUDmfD1GbwAAAABJRU5ErkJggg==\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# plot a histogram of magnitudes\n",
    "ev_df.magnitude.hist()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Since there aren't a lot of events let's look at the picks to make things slightly more interesting:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "# get pick info into a dataframe\n",
    "picks = obsplus.picks_to_df(cat)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "P     384\n",
       "S      85\n",
       "Pb     72\n",
       "Sb     40\n",
       "?      33\n",
       "Name: phase_hint, dtype: int64"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# count the types of phase picks made on all events\n",
    "picks.phase_hint.value_counts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "event_id\n",
       "smi:local/248828    1.186365e+09\n",
       "smi:local/248839    1.186390e+09\n",
       "smi:local/248843    1.186397e+09\n",
       "smi:local/248882    1.186452e+09\n",
       "smi:local/248883    1.186453e+09\n",
       "smi:local/248887    1.186458e+09\n",
       "smi:local/248891    1.186471e+09\n",
       "smi:local/248925    1.186523e+09\n",
       "Name: time, dtype: float64"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# calculate the median pick_time for each event\n",
    "picks.groupby('event_id').time.median()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We could also calculate travel time stats grouped by stations on stations with at least 3 P picks.\n",
    "Since all the events are coming from roughly the same location (within a few km) we might look for stations that have high standard deviations or obvious outliers as on the the first steps in quality control."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>count</th>\n",
       "      <th>mean</th>\n",
       "      <th>std</th>\n",
       "      <th>min</th>\n",
       "      <th>25%</th>\n",
       "      <th>50%</th>\n",
       "      <th>75%</th>\n",
       "      <th>max</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>station</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>DUG</th>\n",
       "      <td>6.0</td>\n",
       "      <td>26.450392</td>\n",
       "      <td>0.271625</td>\n",
       "      <td>26.07174</td>\n",
       "      <td>26.329110</td>\n",
       "      <td>26.405940</td>\n",
       "      <td>26.613517</td>\n",
       "      <td>26.832520</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>L15A</th>\n",
       "      <td>4.0</td>\n",
       "      <td>44.281470</td>\n",
       "      <td>0.395213</td>\n",
       "      <td>43.90421</td>\n",
       "      <td>43.958120</td>\n",
       "      <td>44.299440</td>\n",
       "      <td>44.622790</td>\n",
       "      <td>44.622790</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M14A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>42.733800</td>\n",
       "      <td>0.232199</td>\n",
       "      <td>42.46568</td>\n",
       "      <td>42.666770</td>\n",
       "      <td>42.867860</td>\n",
       "      <td>42.867860</td>\n",
       "      <td>42.867860</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M15A</th>\n",
       "      <td>6.0</td>\n",
       "      <td>37.389573</td>\n",
       "      <td>0.395735</td>\n",
       "      <td>36.92455</td>\n",
       "      <td>37.155293</td>\n",
       "      <td>37.276860</td>\n",
       "      <td>37.723365</td>\n",
       "      <td>37.872200</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N14A</th>\n",
       "      <td>4.0</td>\n",
       "      <td>34.753023</td>\n",
       "      <td>0.309191</td>\n",
       "      <td>34.38217</td>\n",
       "      <td>34.556088</td>\n",
       "      <td>34.810995</td>\n",
       "      <td>35.007930</td>\n",
       "      <td>35.007930</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N15A</th>\n",
       "      <td>4.0</td>\n",
       "      <td>30.787567</td>\n",
       "      <td>0.678324</td>\n",
       "      <td>30.18799</td>\n",
       "      <td>30.206282</td>\n",
       "      <td>30.793665</td>\n",
       "      <td>31.374950</td>\n",
       "      <td>31.374950</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N16A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>27.035340</td>\n",
       "      <td>0.319788</td>\n",
       "      <td>26.66608</td>\n",
       "      <td>26.943025</td>\n",
       "      <td>27.219970</td>\n",
       "      <td>27.219970</td>\n",
       "      <td>27.219970</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N17A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>28.347477</td>\n",
       "      <td>0.111948</td>\n",
       "      <td>28.21821</td>\n",
       "      <td>28.315160</td>\n",
       "      <td>28.412110</td>\n",
       "      <td>28.412110</td>\n",
       "      <td>28.412110</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N18A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>34.095483</td>\n",
       "      <td>0.503778</td>\n",
       "      <td>33.51377</td>\n",
       "      <td>33.950055</td>\n",
       "      <td>34.386340</td>\n",
       "      <td>34.386340</td>\n",
       "      <td>34.386340</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O15A</th>\n",
       "      <td>5.0</td>\n",
       "      <td>24.222288</td>\n",
       "      <td>0.158953</td>\n",
       "      <td>24.04917</td>\n",
       "      <td>24.049170</td>\n",
       "      <td>24.314742</td>\n",
       "      <td>24.335500</td>\n",
       "      <td>24.362860</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O16A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>14.805791</td>\n",
       "      <td>0.214393</td>\n",
       "      <td>14.55876</td>\n",
       "      <td>14.737037</td>\n",
       "      <td>14.915314</td>\n",
       "      <td>14.929307</td>\n",
       "      <td>14.943300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O18A</th>\n",
       "      <td>5.0</td>\n",
       "      <td>23.389030</td>\n",
       "      <td>0.425952</td>\n",
       "      <td>22.92516</td>\n",
       "      <td>23.116750</td>\n",
       "      <td>23.224960</td>\n",
       "      <td>23.792720</td>\n",
       "      <td>23.885561</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P14A</th>\n",
       "      <td>8.0</td>\n",
       "      <td>26.757380</td>\n",
       "      <td>0.369050</td>\n",
       "      <td>26.27232</td>\n",
       "      <td>26.410845</td>\n",
       "      <td>26.791710</td>\n",
       "      <td>27.140000</td>\n",
       "      <td>27.143660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P15A</th>\n",
       "      <td>9.0</td>\n",
       "      <td>16.204748</td>\n",
       "      <td>0.692562</td>\n",
       "      <td>15.27111</td>\n",
       "      <td>15.920450</td>\n",
       "      <td>16.195300</td>\n",
       "      <td>16.614280</td>\n",
       "      <td>17.513850</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P16A</th>\n",
       "      <td>11.0</td>\n",
       "      <td>7.927102</td>\n",
       "      <td>0.215584</td>\n",
       "      <td>7.68219</td>\n",
       "      <td>7.795410</td>\n",
       "      <td>7.859270</td>\n",
       "      <td>8.034686</td>\n",
       "      <td>8.397620</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P17A</th>\n",
       "      <td>6.0</td>\n",
       "      <td>7.174233</td>\n",
       "      <td>0.289963</td>\n",
       "      <td>6.90553</td>\n",
       "      <td>6.943468</td>\n",
       "      <td>7.091821</td>\n",
       "      <td>7.364076</td>\n",
       "      <td>7.607380</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P18A</th>\n",
       "      <td>11.0</td>\n",
       "      <td>14.736735</td>\n",
       "      <td>0.293448</td>\n",
       "      <td>14.25842</td>\n",
       "      <td>14.580390</td>\n",
       "      <td>14.690940</td>\n",
       "      <td>14.856656</td>\n",
       "      <td>15.265000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q14A</th>\n",
       "      <td>6.0</td>\n",
       "      <td>30.549577</td>\n",
       "      <td>0.335974</td>\n",
       "      <td>30.21289</td>\n",
       "      <td>30.306100</td>\n",
       "      <td>30.498545</td>\n",
       "      <td>30.690990</td>\n",
       "      <td>31.090390</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q15A</th>\n",
       "      <td>7.0</td>\n",
       "      <td>18.810036</td>\n",
       "      <td>0.297412</td>\n",
       "      <td>18.38269</td>\n",
       "      <td>18.592790</td>\n",
       "      <td>18.931850</td>\n",
       "      <td>18.977141</td>\n",
       "      <td>19.215850</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q16A</th>\n",
       "      <td>10.0</td>\n",
       "      <td>10.165478</td>\n",
       "      <td>0.328986</td>\n",
       "      <td>9.61800</td>\n",
       "      <td>10.006930</td>\n",
       "      <td>10.153105</td>\n",
       "      <td>10.248371</td>\n",
       "      <td>10.690000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q18A</th>\n",
       "      <td>11.0</td>\n",
       "      <td>17.135286</td>\n",
       "      <td>0.256430</td>\n",
       "      <td>16.89445</td>\n",
       "      <td>16.975725</td>\n",
       "      <td>17.010560</td>\n",
       "      <td>17.186767</td>\n",
       "      <td>17.665000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q19A</th>\n",
       "      <td>3.0</td>\n",
       "      <td>29.604353</td>\n",
       "      <td>0.383435</td>\n",
       "      <td>29.16160</td>\n",
       "      <td>29.493665</td>\n",
       "      <td>29.825730</td>\n",
       "      <td>29.825730</td>\n",
       "      <td>29.825730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R15A</th>\n",
       "      <td>4.0</td>\n",
       "      <td>27.445803</td>\n",
       "      <td>0.545924</td>\n",
       "      <td>26.71361</td>\n",
       "      <td>27.186508</td>\n",
       "      <td>27.603435</td>\n",
       "      <td>27.862730</td>\n",
       "      <td>27.862730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R17A</th>\n",
       "      <td>11.0</td>\n",
       "      <td>20.501156</td>\n",
       "      <td>0.236868</td>\n",
       "      <td>20.28000</td>\n",
       "      <td>20.351515</td>\n",
       "      <td>20.397810</td>\n",
       "      <td>20.510261</td>\n",
       "      <td>20.965000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R18A</th>\n",
       "      <td>8.0</td>\n",
       "      <td>27.290728</td>\n",
       "      <td>0.298790</td>\n",
       "      <td>26.90010</td>\n",
       "      <td>27.151198</td>\n",
       "      <td>27.153725</td>\n",
       "      <td>27.449398</td>\n",
       "      <td>27.732590</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SRU</th>\n",
       "      <td>14.0</td>\n",
       "      <td>12.069394</td>\n",
       "      <td>0.243054</td>\n",
       "      <td>11.71992</td>\n",
       "      <td>11.960260</td>\n",
       "      <td>12.020410</td>\n",
       "      <td>12.112280</td>\n",
       "      <td>12.505000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         count       mean       std       min        25%        50%  \\\n",
       "station                                                               \n",
       "DUG        6.0  26.450392  0.271625  26.07174  26.329110  26.405940   \n",
       "L15A       4.0  44.281470  0.395213  43.90421  43.958120  44.299440   \n",
       "M14A       3.0  42.733800  0.232199  42.46568  42.666770  42.867860   \n",
       "M15A       6.0  37.389573  0.395735  36.92455  37.155293  37.276860   \n",
       "N14A       4.0  34.753023  0.309191  34.38217  34.556088  34.810995   \n",
       "N15A       4.0  30.787567  0.678324  30.18799  30.206282  30.793665   \n",
       "N16A       3.0  27.035340  0.319788  26.66608  26.943025  27.219970   \n",
       "N17A       3.0  28.347477  0.111948  28.21821  28.315160  28.412110   \n",
       "N18A       3.0  34.095483  0.503778  33.51377  33.950055  34.386340   \n",
       "O15A       5.0  24.222288  0.158953  24.04917  24.049170  24.314742   \n",
       "O16A       3.0  14.805791  0.214393  14.55876  14.737037  14.915314   \n",
       "O18A       5.0  23.389030  0.425952  22.92516  23.116750  23.224960   \n",
       "P14A       8.0  26.757380  0.369050  26.27232  26.410845  26.791710   \n",
       "P15A       9.0  16.204748  0.692562  15.27111  15.920450  16.195300   \n",
       "P16A      11.0   7.927102  0.215584   7.68219   7.795410   7.859270   \n",
       "P17A       6.0   7.174233  0.289963   6.90553   6.943468   7.091821   \n",
       "P18A      11.0  14.736735  0.293448  14.25842  14.580390  14.690940   \n",
       "Q14A       6.0  30.549577  0.335974  30.21289  30.306100  30.498545   \n",
       "Q15A       7.0  18.810036  0.297412  18.38269  18.592790  18.931850   \n",
       "Q16A      10.0  10.165478  0.328986   9.61800  10.006930  10.153105   \n",
       "Q18A      11.0  17.135286  0.256430  16.89445  16.975725  17.010560   \n",
       "Q19A       3.0  29.604353  0.383435  29.16160  29.493665  29.825730   \n",
       "R15A       4.0  27.445803  0.545924  26.71361  27.186508  27.603435   \n",
       "R17A      11.0  20.501156  0.236868  20.28000  20.351515  20.397810   \n",
       "R18A       8.0  27.290728  0.298790  26.90010  27.151198  27.153725   \n",
       "SRU       14.0  12.069394  0.243054  11.71992  11.960260  12.020410   \n",
       "\n",
       "               75%        max  \n",
       "station                        \n",
       "DUG      26.613517  26.832520  \n",
       "L15A     44.622790  44.622790  \n",
       "M14A     42.867860  42.867860  \n",
       "M15A     37.723365  37.872200  \n",
       "N14A     35.007930  35.007930  \n",
       "N15A     31.374950  31.374950  \n",
       "N16A     27.219970  27.219970  \n",
       "N17A     28.412110  28.412110  \n",
       "N18A     34.386340  34.386340  \n",
       "O15A     24.335500  24.362860  \n",
       "O16A     14.929307  14.943300  \n",
       "O18A     23.792720  23.885561  \n",
       "P14A     27.140000  27.143660  \n",
       "P15A     16.614280  17.513850  \n",
       "P16A      8.034686   8.397620  \n",
       "P17A      7.364076   7.607380  \n",
       "P18A     14.856656  15.265000  \n",
       "Q14A     30.690990  31.090390  \n",
       "Q15A     18.977141  19.215850  \n",
       "Q16A     10.248371  10.690000  \n",
       "Q18A     17.186767  17.665000  \n",
       "Q19A     29.825730  29.825730  \n",
       "R15A     27.862730  27.862730  \n",
       "R17A     20.510261  20.965000  \n",
       "R18A     27.449398  27.732590  \n",
       "SRU      12.112280  12.505000  "
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# get only P picks\n",
    "df = picks[picks.phase_hint.str.upper() == 'P']\n",
    "\n",
    "# add columns for travel time\n",
    "df['travel_time'] = df['time'] -df['event_time']\n",
    "\n",
    "# filter out stations that aren't used at least 3 times\n",
    "station_count = df['station'].value_counts()\n",
    "stations_with_three = station_count[station_count > 2]\n",
    "\n",
    "# only include picks that are used on at least 3 stations\n",
    "df = df[df.station.isin(stations_with_three.index)]\n",
    "\n",
    "# get stats of travel times\n",
    "df.groupby('station')['travel_time'].describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In addition to `events_to_df` and `picks_to_df`, the following extractors are defined:\n",
    "\n",
    "- `arrivals_to_df` extracts arrival information from an Origin object (or from the preferred origin of each event in a catalog)\n",
    "- `amplitudes_to_df` extracts amplitude information\n",
    "- `station_magnitudes_to_df` extracts station magnitude information from a catalog, event, or magnitude\n",
    "- `magnitudes_to_df` extracts magnitude information"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
